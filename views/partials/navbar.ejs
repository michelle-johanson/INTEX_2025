<nav class="er-navbar">
<div class="er-navbar-inner">

    <!-- LEFT: Logo + Menu -->
    <div class="er-navbar-left">
        <a href="/" class="er-navbar-logo">
            <img src="/img/logo-no-bg.png" alt="Ella Rises Logo">
        </a>

        <ul class="er-navbar-menu">
            <% const menus = [
                { label: "EVENTS", items: [
                    { text: "Events", href: "/events" },
                    { text: "Event Occurrences", href: "/eventOccurrences" }
                ]},
                { label: "REGISTER", items: [
                    { text: "Registrations", href: "/registrations" },
                    { text: "Participants", href: "/participants" },
                    { text: "Milestones", href: "/milestones" }
                ]},
                { label: "SURVEY", items: [
                    { text: "Surveys", href: "/surveys" },
                    { text: "Dashboard", href: "/dashboard" }
                ]}
            ]; %>

            <% menus.forEach(menu => { %>
                <li class="er-nav-item dropdown">
                    <a class="er-nav-link dropdown-toggle"
                        href="#"
                        data-bs-toggle="dropdown">
                        <%= menu.label %>
                    </a>

                    <ul class="dropdown-menu">
                        <% menu.items.forEach(i => { %>
                            <li><a class="dropdown-item" href="<%= i.href %>"><%= i.text %></a></li>
                        <% }) %>
                    </ul>
                </li>
            <% }) %>

            <!-- DONATE BUTTON -->
            <li>
                <a class="er-navbar-donate" href="/donations/new">DONATE</a>
            </li>
        </ul>
    </div>

    <!-- RIGHT: Account -->
    <div class="er-navbar-right">
        <% if (!session || !session.isLoggedIn) { %>
            <a href="/auth/login" class="er-navbar-login">LOGIN</a>
        <% } else { %>

            <div class="dropdown er-account-dropdown">
                <a class="er-nav-link dropdown-toggle"
                    href="#"
                    data-bs-toggle="dropdown">
                    <%= session.username %>
                </a>

                <ul class="dropdown-menu dropdown-menu-end">
                    <% if (session.access_level === "manager") { %>
                    <li><a class="dropdown-item" href="/users">Manage Users</a></li>
                    <li><a class="dropdown-item" href="/donations">Manage Donations</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <% } %>

                    <li><a class="dropdown-item" href="/auth/logout">Logout</a></li>
                </ul>
            </div>

        <% } %>
    </div>

</div>
</nav>
