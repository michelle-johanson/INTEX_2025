<div class="page-container">

    <h1 class="page-title">Schedule New Occurrence</h1>

    <form action="/eventOccurrences/new" method="POST" class="form">

        <label for="EventID">Event Template</label>
        <select id="EventID" name="EventID" required>
            <option value="">Select an event...</option>
            <% events.forEach(e => { %>
                <!-- AUTO-SELECT LOGIC: -->
                <!-- Checks if 'query.event_id' (from URL) matches this event -->
                <option value="<%= e.event_id %>" 
                    <%= (typeof query !== 'undefined' && query.event_id == e.event_id) ? 'selected' : '' %>>
                    <%= e.name %>
                </option>
            <% }) %>
        </select>

        <label for="EventDateTimeStart">Start Date &amp; Time</label>
        <input id="EventDateTimeStart" type="datetime-local" name="EventDateTimeStart" required />

        <label for="EventDateTimeEnd">End Date &amp; Time</label>
        <input id="EventDateTimeEnd" type="datetime-local" name="EventDateTimeEnd" required />

        <label for="EventLocation">Location</label>
        <input id="EventLocation" type="text" name="EventLocation" required />

        <label for="EventCapacity">Capacity</label>
        <input id="EventCapacity" type="number" name="EventCapacity" min="1" required />

        <label for="EventRegistrationDeadline">Registration Deadline</label>
        <input id="EventRegistrationDeadline" type="date" name="EventRegistrationDeadline" required />

        <!-- #TO-DO: create class for flex container with gap: 1rem; align-items: center; -->
        <div class="d-flex mt-2">
            <button class="btn-submit">Create Occurrence</button>
            
            <!-- SMART CANCEL BUTTON -->
            <!-- If we came from a specific event page, go back there. Otherwise go to main list. -->
            <% if (typeof query !== 'undefined' && query.event_id) { %>
                <a href="/events/<%= query.event_id %>">Cancel</a>
            <% } else { %>
                <a href="/eventOccurrences">Cancel</a>
            <% } %>
        </div>
    </form>

</div>