<section class="page-container">
    <div class="page-card-wide">

        <h2 class="page-title">Participant Details</h2>

        <% 
            const isManager = 
                session.access_level &&
                (session.access_level.toLowerCase() === "manager" ||
                 session.access_level.toLowerCase() === "admin");
        %>

        <!-- DETAILS CARD -->
        <div class="detail-card">

            <div class="detail-row">
                <span class="detail-label">Name</span>
                <span class="detail-value">
                    <%= participant.first_name %> <%= participant.last_name %>
                </span>
            </div>

            <div class="detail-row">
                <span class="detail-label">Email</span>
                <span class="detail-value"><%= participant.email %></span>
            </div>

            <div class="detail-row">
                <span class="detail-label">Phone</span>
                <span class="detail-value"><%= participant.phone %></span>
            </div>

            <div class="detail-row">
                <span class="detail-label">Location</span>
                <span class="detail-value">
                    <%= participant.city %>, <%= participant.state %> <%= participant.zip %>
                </span>
            </div>

            <div class="detail-row">
                <span class="detail-label">Role</span>
                <span class="detail-value"><%= participant.role %></span>
            </div>

            <div class="detail-row">
                <span class="detail-label">School / Employment</span>
                <span class="detail-value"><%= participant.school_or_employer %></span>
            </div>

            <div class="detail-row">
                <span class="detail-label">Field of Interest</span>
                <span class="detail-value"><%= participant.field_of_interest %></span>
            </div>

            <div class="detail-row">
                <span class="detail-label">Total Donations</span>
                <span class="detail-value">$<%= participant.total_donations || 0 %></span>
            </div>

        </div>

        <!-- PARTICIPANT SELF-VIEW ACTIONS -->
        <% if (!isManager) { %>
            <div class="btn-wrapper" style="margin-top: 2rem;">
                <a href="/registrations/participant/<%= participant.participant_id %>" 
                   class="btn btn-primary btn-lg">
                    View Registered Events
                </a>

                <a href="/milestones/participant/<%= participant.participant_id %>" 
                   class="btn btn-outline btn-lg">
                    View Milestones
                </a>
            </div>
        <% } %>

        <!-- MANAGER ACTIONS -->
        <% if (isManager) { %>
            <div class="subsection-header" style="margin-top: 2rem;">
                <h3>Management & Actions</h3>
                <div class="heading-underline"></div>
            </div>

            <div class="btn-wrapper">

                <a href="/milestones/participant/<%= participant.participant_id %>" 
                   class="btn btn-outline btn-lg">
                    View Milestones
                </a>

                <a href="/participants/<%= participant.participant_id %>/edit" 
                   class="btn btn-primary btn-lg">
                    Edit Profile
                </a>

                <a href="/registrations/participant/<%= participant.participant_id %>" 
                   class="btn btn-outline btn-lg">
                    View Registered Events
                </a>

                <form action="/participants/<%= participant.participant_id %>/delete" 
                      method="POST"
                      onsubmit="return confirm('Are you sure you want to delete this participant?');">
                    <button class="btn btn-delete btn-lg">Delete Participant</button>
                </form>

            </div>

            <div class="btn-wrapper" style="margin-top: 1.5rem;">
                <a href="/participants" class="btn btn-secondary btn-lg">‚Üê Back to Participant Directory</a>
            </div>
        <% } %>

    </div>
</section>
