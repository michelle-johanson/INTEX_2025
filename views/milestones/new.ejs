<div class="page-container">
    <div class="page-card-form">

        <h1 class="page-title">Add Milestone</h1>

        <form action="/milestones/new" method="POST" class="form">

            <% 
                const selectedParticipant =
                    participants.find(p => String(p.participant_id) === String(selectedId)) || null;
            %>

            <% if (selectedId && selectedParticipant) { %>
                <div class="detail-card" style="margin-bottom: 1.25rem;">
                    <div class="detail-row">
                        <span class="detail-label">Participant</span>
                        <span class="detail-value">
                            <%= selectedParticipant.first_name %> <%= selectedParticipant.last_name %>
                            (ID #<%= selectedId %>)
                        </span>
                    </div>
                </div>
            <% } %>

            <input type="hidden" name="ParticipantID" value="<%= selectedId %>" required>

            <label for="MilestoneTitle">Milestone Title</label>
            <input 
                id="MilestoneTitle"
                type="text"
                name="MilestoneTitle"
                placeholder="e.g. Completed Python Workshop"
                required
            />

            <label for="MilestoneDate">Milestone Date</label>
            <input 
                id="MilestoneDate"
                type="date"
                name="MilestoneDate"
                required
            />

            <!-- BUTTONS -->
            <div class="btn-wrapper">
                <button class="btn btn-primary btn-lg">
                    Create Milestone
                </button>

                <% if (selectedId) { %>
                    <a href="/milestones/participant/<%= selectedId %>" 
                       class="btn btn-secondary btn-lg">
                        Cancel
                    </a>
                <% } else { %>
                    <a href="/milestones" class="btn btn-secondary btn-lg">
                        Cancel
                    </a>
                <% } %>
            </div>

        </form>

    </div>
</div>
