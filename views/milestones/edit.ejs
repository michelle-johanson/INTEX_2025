<div class="page-container">

    <h1 class="page-title">Edit Milestone</h1>

    <form action="/milestones/<%= milestone.participant_id %>/<%= milestone.milestone_no %>/edit" 
          method="POST" 
          class="form">

        <label for="ParticipantDisplay">Participant</label>
        <select id="ParticipantDisplay" disabled style="background-color: #e9ecef; cursor: not-allowed;">
            <% participants.forEach(p => { %>
                <option value="<%= p.participant_id %>" 
                    <%= p.participant_id === milestone.participant_id ? "selected" : "" %>>
                    <%= p.first_name %> <%= p.last_name %> (ID #<%= p.participant_id %>)
                </option>
            <% }) %>
        </select>

        <label for="MilestoneTitle">Milestone Title</label>
        <input id="MilestoneTitle" 
               type="text" 
               name="MilestoneTitle" 
               value="<%= milestone.title %>" 
               required />

        <label for="MilestoneDate">Milestone Date</label>
        <input id="MilestoneDate" 
               type="date" 
               name="MilestoneDate" 
               value="<%= milestone.achieved_date ? new Date(milestone.achieved_date).toISOString().split('T')[0] : '' %>" 
               required />

        <div style="display: flex; gap: 1rem; align-items: center; margin-top: 1rem;">
            <button class="btn-submit">Save Changes</button>
            
            <a href="/milestones/participant/<%= milestone.participant_id %>" 
               style="text-decoration: none; color: #666;">
               Cancel
            </a>
        </div>
    </form>

</div>