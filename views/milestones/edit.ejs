<section class="page-container">
    <div class="page-card-form">

        <h1 class="page-title">Edit Milestone</h1>

        <form action="/milestones/<%= milestone.participant_id %>/<%= milestone.milestone_no %>/edit" method="POST"
            class="form">

            <!-- PARTICIPANT (READ-ONLY) -->
            <label for="ParticipantDisplay">Participant</label>
            <div class="select-wrapper disabled-select">
                <select id="ParticipantDisplay" disabled>
                    <% participants.forEach(p=> { %>
                        <option value="<%= p.participant_id %>" <%=p.participant_id===milestone.participant_id
                            ? "selected" : "" %>>
                            <%= p.first_name %>
                                <%= p.last_name %> (ID #<%= p.participant_id %>)
                        </option>
                        <% }) %>
                </select>
            </div>

            <!-- TITLE -->
            <label for="MilestoneTitle">Milestone Title</label>
            <input id="MilestoneTitle" type="text" name="MilestoneTitle" value="<%= milestone.title %>" required />

            <!-- DATE -->
            <label for="MilestoneDate">Milestone Date</label>
            <input id="MilestoneDate" type="date" name="MilestoneDate"
                value="<%= milestone.achieved_date ? new Date(milestone.achieved_date).toISOString().split('T')[0] : '' %>"
                required />

            <!-- ACTION BUTTONS -->
            <div class="btn-wrapper">
                <button class="btn btn-primary btn-lg">
                    Save Changes
                </button>

                <a href="/milestones/participant/<%= milestone.participant_id %>" class="btn btn-secondary btn-lg">
                    Cancel
                </a>
            </div>

        </form>

    </div>
</section>