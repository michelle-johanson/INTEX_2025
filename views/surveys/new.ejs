<div class="page-container">

    <h1 class="page-title">Add Survey</h1>

    <form action="/surveys/new" method="POST" class="form">

        <label>Participant (Required)</label>
        <select name="ParticipantID" required>
            <option value="">Select a participant…</option>
            
            <% participants.forEach(p => { %>
                <option value="<%= p.participant_id %>">
                    <%= p.first_name %> <%= p.last_name %>
                </option>
            <% }) %>
        </select>

        <label>Event Occurrence (Required)</label>
        <select name="EventOccurrenceID" required>
            <option value="">Select an event…</option>
            
            <% occurrences.forEach(o => { %>
                <option value="<%= o.event_occurrence_id %>">
                    <%= o.event_name %> — <%= new Date(o.starts_at).toLocaleString() %>
                </option>
            <% }) %>
        </select>

        <label>Satisfaction Score</label>
        <input type="number" name="SurveySatisfactionScore" min="1" max="5" required />

        <label>Usefulness Score</label>
        <input type="number" name="SurveyUsefulnessScore" min="1" max="5" required />

        <label>Recommendation Score</label>
        <input type="number" name="SurveyRecommendationScore" min="1" max="5" required />

        <label>Overall Score</label>
        <input type="number" name="SurveyOverallScore" min="1" max="5" required />

        <label>Comments</label>
        <textarea name="SurveyComments" rows="3"></textarea>

        <label>Submission Date</label>
        <input type="date" name="SurveySubmissionDate" value="<%= new Date().toISOString().split('T')[0] %>" required />

        <div style="display: flex; gap: 1rem; align-items: center; margin-top: 1rem;">
            <button class="btn-submit">Submit Survey</button>
            <a href="/surveys" style="text-decoration: none; color: #666;">Cancel</a>
        </div>

    </form>

</div>